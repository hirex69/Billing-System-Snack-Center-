<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        h1{
            text-align: right;
        }
    </style>
</head>
<body >
    <h2 >
    <img src="https://png.pngtree.com/template/20190214/ourmid/pngtree-coffee-and-tea-logo-image_54910.jpg" alt=""  width="200" height="110">
    Friend's snack center<a href="task4.html"></a></h2>
<div class="container-fluid">
    <div class="container">
        <div class="part1">
            <form method="post" autocomplete="off" name="google-sheet">
            <fieldset>
                <legend>Personal Information</legend>
                <div class="form-group">
                Full Name: <input type="text" name="name" class="form-control"  id="name"> <br/>
                </div>
                <div class="form-group">

                Mobile No: <input type="number" name="Phone" class="form-control"  id="email">
                </div>
            </fieldset>
        </div>


        <div class="part2">
            <fieldset>
                <legend>Your Orders</legend>
                Tea(Rs. 10): <input type="text" id="Tea"><br/>
                Smosa (Rs. 10): <input type="text" id="smosa"> <br/>
                Kachori (Rs. 12): <input type="text" id="kachori"><br/>
                Vadapav (Rs. 10): <input type="text" id="vadapav"><br/>
                Maggi (Rs. 50): <input type="text" id="maggi"><br/>
                <input class="button" type="button" onclick="printDiv('printableArea')" value="Print Bill" />   <div class="form-group">

                    <h1> Confirm amount <input type="number" name="amount" class="form-control"  id="email">
                     </div>
                 
                <div class="form-group">
                    <input type="submit" name="submit" class="button" value="Submit" />
                    </div>
            </fieldset>
        </div>
        
    </div>

    <div  id="printableArea" class="container">
        
            
      
      
      
        <fieldset>
            
            <div id = "clock" onload="currentTime()"></div>
            <legend>Your Bill</legend> <h3 align="right" >Scan to Pay Bill.</h3>
            <img src="C:\Users\Prasad\Pictures\WhatsApp Image 2023-03-24 at 07.56.37.jpg" style="width:180px;height:120px;float:right;padding-bottom: 20px;padding-right: 0px;">
           
            
       
            <h3>Your Name:<span id="name2"></span></h3>
            <h3>Mobile No: <span id="email2"></span></h3>
        
            <table border="1" >
                <thead>
                    <tr><th>Menu</th><th>Price</th><th>Quantity</th><th>Amout</th></tr>
                </thead>
                <tbody id="bill">
                    <!-- <tr><td>Smosa</td><td>Rs. 10</td><td>1</td><td>10x1 = 10</td></tr> -->
                </tbody>

                

            </table>
            
            </fieldset>
            <h8 >&#128523 Thank You Visit Again &#128525</h8>
            
            <h1>Total Amout: Rs. <span id="amount" name="amount" class="form-control" type="number">0</span></h1>
          
    </div>
</div>
<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzyBEeX2dPM86Pf655ElOukAiPlcMu9J3rk3ewnPoTDcN2v5lZaodQOF43ySgDJRzfB/exec'
    const form = document.forms['google-sheet']
  
    form.addEventListener('submit', e => {
      e.preventDefault()
      fetch(scriptURL, { method: 'POST', body: new FormData(form)})
        .then(response => alert("Thanks for Confirmation! Your Details have been saved.."))
        .catch(error => console.error('Error!', error.message))
    })
  </script>
<script>
var Smosa = 10, Kachori = 12, Vadapav = 10, Maggi = 50,Tea = 10;
var smosa_q=0, kachori_q=0, vadapav_q=0, maggi_q=0, Tea_q=0;
var name = "", email="";
var smosaBill="",kachoriBill="",vadapavBill="",maggiBill="",Teabill="";
var total_amount=0;
document.getElementById("name").addEventListener("keyup",function(){
    // name = document.getElementById("name").value;
    
    document.getElementById("name2").innerHTML=this.value;
});

document.getElementById("email").addEventListener("keyup",function(){
    // name = document.getElementById("name").value;
    
    document.getElementById("email2").innerHTML=this.value;
});



document.getElementById("smosa").addEventListener("keyup",function(){
if(this.value==""||this.value==0){
    smosaBill="";
    smosa_q=0;
    showBill();
}else{
    smosa_q=this.value;
    smosaBill="<tr><td>Smosa</td><td>Rs. "+Smosa+"</td><td>"+smosa_q+"</td><td>"+Smosa+"x"+smosa_q+" = "+Smosa*smosa_q+"</td></tr>";
    showBill();

}
});

document.getElementById("kachori").addEventListener("keyup",function(){
if(this.value==""||this.value==0){
    kachoriBill="";
    kachori_q=0;
    showBill();

}else{
    kachori_q=this.value;
    kachoriBill="<tr><td>Kachori</td><td>Rs. "+Kachori+"</td><td>"+kachori_q+"</td><td>"+Kachori+"x"+kachori_q+" = "+Kachori*kachori_q+"</td></tr>";
    showBill();
}
});

document.getElementById("vadapav").addEventListener("keyup",function(){
if(this.value==""||this.value==0){
    vadapavBill="";
    vadapav_q=0;
    showBill();

}else{
    vadapav_q=this.value;
    vadapavBill="<tr><td>Vadapav</td><td>Rs. "+Vadapav+"</td><td>"+vadapav_q+"</td><td>"+Vadapav+"x"+vadapav_q+" = "+Vadapav*vadapav_q+"</td></tr>";
    showBill();
}
});

document.getElementById("maggi").addEventListener("keyup",function(){
if(this.value==""||this.value==0){
    maggiBill="";
    maggi_q=0;
    showBill();

}else{
    maggi_q=this.value;
    maggiBill="<tr><td>Maggi</td><td>Rs. "+Maggi+"</td><td>"+maggi_q+"</td><td>"+Vadapav+"x"+maggi_q+" = "+Maggi*maggi_q+"</td></tr>";
    showBill();
}
});
document.getElementById("Tea").addEventListener("keyup",function(){
if(this.value==""||this.value==0){
    TeaBill="";
    Tea_q=0;
    showBill();
}else{
    Tea_q=this.value;
    TeaBill="<tr><td>tea</td><td>Rs. "+Tea+"</td><td>"+Tea_q+"</td><td>"+Tea+"x"+Tea_q+" = "+Tea*Tea_q+"</td></tr>";
    showBill();

}
});
function printDiv(divName) {
     var printContents = document.getElementById(divName).innerHTML;
     var originalContents = document.body.innerHTML;

     document.body.innerHTML = printContents;

     window.print();

     document.body.innerHTML = originalContents;
}

function showBill(){
    document.getElementById("bill").innerHTML=smosaBill+kachoriBill+vadapavBill+maggiBill+TeaBill; //table statement
    document.getElementById("amount").innerHTML = Smosa*smosa_q+Kachori*kachori_q+Vadapav*vadapav_q+Maggi*maggi_q+Tea*Tea_q; // total amount
}
function currentTime() {
  let date = new Date(); 
  let hh = date.getHours();
  let mm = date.getMinutes();
  let ss = date.getSeconds();
  let session = "AM";

  if(hh === 0){
      hh = 12;
  }
  if(hh > 12){
      hh = hh - 12;
      session = "PM";
   }

   hh = (hh < 10) ? "0" + hh : hh;
   mm = (mm < 10) ? "0" + mm : mm;
   ss = (ss < 10) ? "0" + ss : ss;
    
   let time = hh + ":" + mm + ":" + ss + " " + session;

  document.getElementById("clock").innerText = time; 
  let t = setTimeout(function(){ currentTime() }, 1000);
}

currentTime();
</script>
</body>
</html>
